{
  "meta": {
    "project": "DRE 2",
    "date": "2025-09-08",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "DRE 2 é um sistema completo de gestão financeira para pequenas e médias empresas, focado na geração de Demonstrativos de Resultado do Exercício (DRE), controle de contas a pagar/receber, gestão de colaboradores e geração de relatórios analíticos para apoiar decisões financeiras.",
  "core_goals": [
    "Facilitar a gestão financeira integrada para pequenas e médias empresas.",
    "Permitir o controle eficiente de contas a pagar e a receber com notificações e comprovantes.",
    "Automatizar a geração do Demonstrativo de Resultado do Exercício com análises visuais e comparativos.",
    "Gerenciar colaboradores com níveis de acesso e permissões detalhadas.",
    "Fornecer dashboards e relatórios financeiros interativos e exportáveis.",
    "Garantir segurança e controle de acesso via autenticação e políticas RLS.",
    "Oferecer uma interface moderna, intuitiva e responsiva, compatível com dispositivos móveis e PWA."
  ],
  "key_features": [
    "Sistema de autenticação e ativação com código de ativação para registro controlado.",
    "Gestão de colaboradores com convite por email e controle de permissões baseado em funções.",
    "Cadastro e gestão de múltiplas empresas com dados cadastrais completos.",
    "Plano de contas contábeis com estrutura hierárquica, categorias e status.",
    "Lançamentos financeiros detalhados vinculados às contas contábeis.",
    "Gestão de contas a pagar com status, comprovantes e geração automática de lançamentos.",
    "Dashboard com indicadores financeiros, gráficos de margens e evolução.",
    "Relatórios diversos incluindo DRE, fluxo de caixa e análises financeiras interativas.",
    "Configurações do sistema com integração Supabase e teste de conexão.",
    "Fluxo completo de ativação, cadastro, gerenciamento financeiro e relatórios."
  ],
  "user_flow_summary": [
    "Usuário solicita e recebe código de ativação para criar conta e acessar o sistema.",
    "Proprietário ou admin convida colaboradores por email, que aceitam convite e recebem permissões.",
    "Usuário cadastra contas a pagar, recebe notificações de vencimento, anexa comprovantes e marca como paga.",
    "Sistema gera automaticamente lançamentos financeiros e atualiza o DRE e relatórios.",
    "Usuário seleciona e personaliza relatórios financeiros para análise e exportação.",
    "Usuário gerencia empresas, contas contábeis e colaboradores através da interface.",
    "Sistema executa validações de segurança, autenticação e controle de acesso em todas as etapas."
  ],
  "validation_criteria": [
    "Login e cadastro com código de ativação devem funcionar corretamente e garantir acesso seguro.",
    "Convite e aceitação de colaboradores deve refletir permissões e acessos configurados.",
    "Cadastro, edição e marcação de contas a pagar devem atualizar lançamentos financeiros corretamente.",
    "Geração de relatórios e dashboard devem apresentar dados corretos e atualizados.",
    "Interface deve ser responsiva e carregar rapidamente em diferentes dispositivos.",
    "Políticas de segurança e Row Level Security devem proteger dados entre empresas.",
    "Upload de comprovantes e anexos deve estar funcionando e acessível.",
    "Testes automatizados e manuais para fluxos críticos devem ser implementados e aprovados."
  ],
  "code_summary": {
    "projectName": "DRE 2",
    "description": "Sistema de gestão financeira com foco em Demonstrativo de Resultado do Exercício (DRE), controle de contas a pagar/receber e gestão de colaboradores.",
    "techStack": {
      "frontend": {
        "framework": "React 19",
        "language": "TypeScript",
        "styling": "Tailwind CSS",
        "buildTool": "Vite",
        "routing": "React Router DOM",
        "charts": "Recharts",
        "icons": "Lucide React"
      },
      "backend": {
        "platform": "Supabase",
        "database": "PostgreSQL",
        "auth": "Supabase Auth",
        "security": "Row Level Security (RLS)",
        "serverless": "Edge Functions"
      }
    },
    "mainFeatures": [
      {
        "name": "Autenticação e Ativação",
        "description": "Sistema de login, registro e ativação por código",
        "components": [
          "SignUpPage",
          "LoginPage",
          "ActivationCodePage"
        ],
        "services": [
          "activationCodeService"
        ],
        "routes": [
          "/login",
          "/register",
          "/activation"
        ]
      },
      {
        "name": "Gestão de Colaboradores",
        "description": "Sistema de convites e permissões para colaboradores",
        "components": [
          "GerenciarColaboradores",
          "ListarColaboradores",
          "ConvidarColaborador",
          "AceitarConvitePage"
        ],
        "hooks": [
          "usePermissions",
          "useHasPermission",
          "useCanAccess"
        ],
        "guards": [
          "PermissionGuard",
          "PermissionGate",
          "RoleGate",
          "withPermissions"
        ],
        "services": [
          "CollaboratorsService"
        ],
        "routes": [
          "/settings/collaborators",
          "/accept-invitation/:token"
        ]
      },
      {
        "name": "Gestão de Empresas",
        "description": "Cadastro e gerenciamento de empresas",
        "components": [
          "EmpresasList",
          "EmpresaForm",
          "EmpresaDetails"
        ],
        "contexts": [
          "CompanyContext"
        ],
        "routes": [
          "/empresas",
          "/empresas/nova",
          "/empresas/:id"
        ]
      },
      {
        "name": "Plano de Contas",
        "description": "Gerenciamento do plano de contas contábeis",
        "components": [
          "ContaForm",
          "ContasList",
          "CategoriasGuide"
        ],
        "types": [
          "ContaContabil",
          "ContaCategoria"
        ],
        "routes": [
          "/contas",
          "/contas/nova"
        ]
      },
      {
        "name": "Lançamentos Financeiros",
        "description": "Registro e gestão de lançamentos financeiros",
        "components": [
          "LancamentoForm",
          "LancamentosList"
        ],
        "types": [
          "Lancamento"
        ],
        "routes": [
          "/lancamentos",
          "/lancamentos/novo"
        ]
      },
      {
        "name": "Contas a Pagar",
        "description": "Gestão de contas a pagar com comprovantes",
        "components": [
          "ContaPagarForm",
          "ContasPagarList",
          "ContaPagarDetails"
        ],
        "hooks": [
          "useContaPagarStatus"
        ],
        "routes": [
          "/contas-pagar",
          "/contas-pagar/nova",
          "/contas-pagar/:id"
        ]
      },
      {
        "name": "Dashboard",
        "description": "Visão geral com indicadores financeiros",
        "components": [
          "Dashboard",
          "DashboardCards",
          "RevenueChart",
          "MargensEvolutionChart",
          "DREStructureChart"
        ],
        "routes": [
          "/dashboard"
        ]
      },
      {
        "name": "Relatórios",
        "description": "Relatórios financeiros e análises",
        "components": [
          "ReportsList",
          "DREComparativoReport",
          "FluxoCaixaReport",
          "LancamentosReport",
          "DashboardAnalyticReport",
          "RevenueAnalysisReport"
        ],
        "services": [
          "DREService"
        ],
        "routes": [
          "/relatorios"
        ]
      },
      {
        "name": "Configurações",
        "description": "Configurações do sistema e da empresa",
        "components": [
          "ConfiguracoesPage",
          "ConfigurationStatus",
          "SupabaseConnectionTest"
        ],
        "routes": [
          "/configuracoes"
        ]
      }
    ],
    "dataModels": [
      {
        "name": "empresas",
        "fields": [
          "id",
          "razao_social",
          "cnpj",
          "user_id",
          "created_at"
        ]
      },
      {
        "name": "contas_contabeis",
        "fields": [
          "id",
          "codigo",
          "nome",
          "tipo",
          "categoria",
          "company_id",
          "parent_id"
        ]
      },
      {
        "name": "lancamentos",
        "fields": [
          "id",
          "data",
          "valor",
          "descricao",
          "conta_id",
          "company_id",
          "tipo"
        ]
      },
      {
        "name": "contas_a_pagar",
        "fields": [
          "id",
          "fornecedor",
          "valor",
          "vencimento",
          "status",
          "company_id",
          "comprovante_url"
        ]
      },
      {
        "name": "profiles",
        "fields": [
          "id",
          "user_id",
          "nome_completo",
          "telefone",
          "created_at"
        ]
      },
      {
        "name": "collaborators",
        "fields": [
          "id",
          "company_id",
          "user_id",
          "role",
          "created_at"
        ]
      },
      {
        "name": "invitations",
        "fields": [
          "id",
          "company_id",
          "email",
          "role",
          "token",
          "invited_by",
          "created_at",
          "expires_at"
        ]
      },
      {
        "name": "activation_codes",
        "fields": [
          "id",
          "code",
          "email",
          "nome",
          "empresa",
          "used",
          "created_at"
        ]
      }
    ],
    "userFlows": [
      {
        "name": "Ativação e Cadastro",
        "steps": [
          "Usuário solicita código de ativação",
          "Sistema gera código e envia para administrador",
          "Administrador fornece código ao usuário",
          "Usuário utiliza código para acessar tela de cadastro",
          "Usuário completa cadastro e acessa o sistema"
        ]
      },
      {
        "name": "Gestão de Contas a Pagar",
        "steps": [
          "Usuário cadastra conta a pagar",
          "Sistema notifica sobre contas próximas do vencimento",
          "Usuário marca conta como paga e anexa comprovante",
          "Sistema gera lançamento no DRE"
        ]
      },
      {
        "name": "Convite de Colaboradores",
        "steps": [
          "Proprietário/Admin convida colaborador por email",
          "Sistema envia email com link de convite",
          "Colaborador acessa link e cria conta ou faz login",
          "Colaborador é adicionado à empresa com permissões definidas"
        ]
      },
      {
        "name": "Geração de Relatórios",
        "steps": [
          "Usuário seleciona tipo de relatório",
          "Usuário define período e filtros",
          "Sistema processa dados e exibe relatório",
          "Usuário pode exportar ou analisar dados interativamente"
        ]
      }
    ],
    "testingPriorities": [
      {
        "feature": "Autenticação e Ativação",
        "priority": "Alta",
        "testCases": [
          "Login com credenciais válidas",
          "Solicitação de código de ativação",
          "Uso de código para registro"
        ]
      },
      {
        "feature": "Gestão de Colaboradores",
        "priority": "Alta",
        "testCases": [
          "Convite de colaborador",
          "Aceitação de convite",
          "Verificação de permissões"
        ]
      },
      {
        "feature": "Dashboard e Relatórios",
        "priority": "Média",
        "testCases": [
          "Carregamento de dados do DRE",
          "Visualização de gráficos",
          "Filtros de período"
        ]
      },
      {
        "feature": "Contas a Pagar",
        "priority": "Média",
        "testCases": [
          "Cadastro de conta",
          "Marcação como paga",
          "Upload de comprovante"
        ]
      }
    ],
    "environmentVariables": [
      {
        "name": "VITE_SUPABASE_URL",
        "description": "URL do projeto Supabase",
        "required": true
      },
      {
        "name": "VITE_SUPABASE_ANON_KEY",
        "description": "Chave anônima do Supabase",
        "required": true
      },
      {
        "name": "VITE_APP_URL",
        "description": "URL base da aplicação",
        "required": false
      }
    ]
  }
}
